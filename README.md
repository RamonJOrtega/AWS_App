# AWS Marketing App

## What Is It?
Go to https://aws-marketing-app.vercel.app/ to try out the App!

Type in words describing your brand, and get a social media caption and keywords/hashtags! 

If you live in the US near Oregon (AWS US-west-2 ), you can expect results in 2-3 seconds. If you live on the East coast, latency is about 8 seconds.

![alt text](https://github.com/RamonJOrtega/AWS_Marketing_App/blob/main/appPIcture1.png)
![alt text](https://github.com/RamonJOrtega/AWS_Marketing_App/blob/main/appPIcture2.png)

## How the App Works
This is a `Saas` (`software as a service`) application.
The Infrastructure is an `API` written in `python` using `FastAPI` and contained within `AWS Lambda` service on `AWS API Gateway`.
The `AWS Lambda` service takes a prompt from a user (in a `URI`) and makes a call to the 3rd party `OpenAI` `API` which returns keyword results.
The `AWS Lambda` service is triggered by AWS `API gateway` which provides an endpoint with a URI query structure. 
- Example: https://##mgcbkr##.execute-api.us-west-2.amazonaws.com/prod/generate_wods?prompt=classy_cocktail. 
- When an end point is queried, the backend gets `OpenAI data` and displays recommended branding captions and keywords to user.
The `AWS Lambda` and `API Gateway` service are maintined via `AWS CDK`.
All `pip` dependicies live in a `base layer` (created with `Docker`) within `AWS Lamba` 
  
The user communicates with the services via a front end written in `Typscript`, `React`, and `Next.js` which is all hosted on `Vercel`

### `openAI` Model: `GPT-3.5-Turbo`.
- This is the fastsest, lowest cost, GPT model, capable of simple tasks.
- The financial cost of running this app is currently `$0.001`/`1000 tokens` or `$0.005`/`request`
- Each `request` is approximately 31 characters which usually equates to about `13 tokens`
- For `$5`/`month` the will serve approximately `960 requests`s

### Front End Tech Stack
- `Typescript` language
- `NextJS` and `React` main framworks
- `TailwindCSS` styling framework
- `Vercel` hosting

### Back End Tech Stack
- `Python` language
- `FastAPI` framework
- `AWS` `Lambda` and `API Gateway` hosting
- `OpenAI` for content generation
- `AWS CDK` and `Docker` for infrastructure management
- `GitHub` version control 
- `Linux` bash terminal for endpoint testing`
- `Docker` container setup for AWS Service

## Repository File Structure

### /infrastructure
The AWS infrastructure generated by AWS CDK lives in the /infrastructure folder.
Every time you make a change to the infrastructure, you need to save and run "cdk deploy" to update the AWS Lambda service on AWS API Gateway.

## /app
The python API and FastAPI backend live in the the `/app` folder.
Update these files to get different responses from Chat GPT on openAI.
Don't forget to save and run "cdk deploy" as mentioned above.

## /brand-helper-site filder
The Next.JS front end lives in the `/brand-helper-site`` folder.
Modify these files to change the themes, text, and browser behavior of the app.
Don't forget to push your files to github to auto-update the Vercel Host if you put this on a website.

## To Duplicate this App on your local machine and your own AWS Account
Clone this repo, and make sure you already have `python3`, `Yarn`, and `node` installed 

### Duplicate the frontend:
1. `cd brand-helper-site` folder from the terminal.
2. `yarn install` to install all dependencies
3. Optionally, if you want to make this a webApp, you can host this frontend for free `Vercel.com/docs` -> `quickstart` -> `Next.js` -> `Deploy`.

### Duplicate repo backend:
1. From the main directory, have `node` and `python3` installed.
2. Run `yarn add aws-cdk-lib` per AWS CDK instructions online.
3. Create an AWS account, and setup `AWS Lambda` and `AWS API Gateway`.
4. Run `pip install fastAPI` , `pip install mangum` and `pip install awscli`.
5. Navigate: `cd insfrastructure` and intitialize Cloud Developement Kit with `cdk init --language typescript`. Note this will not be needed if you are using the existing `infrtastructure` folder contents. However you will always need to also run `npm build to build the infrastructure`
6. Navigate: `cd infrastructure/lambda_base_layer` and install docker with `sudo ap install docker.io` in order to prepare dependencies which we will imbedin the lambda base layer.
7. From the main folder, run `sudo npm install -g aws-cdk` to get the cloud developement kit which pushes your code to the server.
8. To get the infrastructure code to your AWS accout, Run `cdk bootsrap aws://<12-digit-aws-accountnumber>/<zone>`. Zone example `<us-west-2>`
9. Run `cdk deploy` (creates lambda function on your account and sets up the backend).


